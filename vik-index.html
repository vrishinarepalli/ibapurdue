<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>IBA Basketball Tournament</title>
  
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyBN0rfpzjredziJbPny-YfEgq4uE2l1hzE",
      authDomain: "iba-website-63cb3.firebaseapp.com",
      projectId: "iba-website-63cb3",
      storageBucket: "iba-website-63cb3.firebasestorage.app",
      messagingSenderId: "267064036667",
      appId: "1:267064036667:web:4f9d28aac0d5ae4ca97b1e",
      measurementId: "G-GGH99DCY07"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    // Make Firebase available globally
    window.db = db;
    window.firestoreImports = { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: "#ff9d00",
            brand2: "#4f46e5"
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="wrap">
    <header class="sticky top-4 z-50 flex items-center justify-between 
      p-4 rounded-2xl bg-white/10 backdrop-blur-lg shadow-lg border border-white/20">
  
      <!-- Logo + Icon Edit Modal -->
      <div class="flex items-center gap-3">
        <div class="logo" aria-hidden="true">
          <img src="images/iba-logo.png" 
            alt="IBA Logo" 
            class="block w-10 h-10 object-contain" />
        </div>
  
        <!-- Edit icon modal (unchanged, just wrapped in Tailwind classes) -->
        <div id="editIconModal" class="edit-icon-modal">
          <div class="edit-icon-content">
            <h3 class="text-lg font-semibold">Change Team Icon</h3>
            <p id="editIconTeamName" class="text-gray-400 mb-4"></p>
            <div class="icon-picker" id="iconPicker">
              <!-- Icons populated by JS -->
            </div>
            <div class="flex gap-2 mt-4">
              <button type="button" class="admin-cancel px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600">Cancel</button>
              <button type="button" class="admin-submit px-4 py-2 rounded-lg bg-gradient-to-r from-brand to-brand2 text-white hover:scale-105 transition">Save Icon</button>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Title -->
      <div class="title text-center md:text-left">
        <h1 class="text-2xl font-extrabold bg-gradient-to-r from-brand to-brand2 bg-clip-text text-transparent tracking-wide">
          IBA Tournament
        </h1>
        <p class="text-sm text-gray-400">Indian Basketball Association ‚Ä¢ Fall 2025</p>
      </div>
  
      <!-- Meta / Instagram -->
      <span class="px-3 py-1 text-sm font-bold rounded-full 
             bg-gradient-to-r from-brand to-brand2 text-white 
             shadow-md flashy-glow">
        INSTAGRAM
      </span>
    </header>  

        <!-- Hero Section -->
    <section class="relative w-full rounded-2xl overflow-hidden mt-6">
      <!-- Background image or gradient -->
      <div class="absolute inset-0">
        <img src="images/basketball-court.jpg" alt="Basketball Court" 
            class="w-full h-64 object-cover opacity-30">
        <div class="absolute inset-0 bg-gradient-to-r from-brand/70 to-brand2/70 opacity-70"></div>
      </div>

      <!-- Hero Content -->
      <div class="relative z-10 text-center py-12">
        <h2 class="text-3xl md:text-4xl font-extrabold text-white drop-shadow-lg">
          The Court. The Teams. The Glory
        </h2>
        <p class="mt-3 text-gray-200">IBA Spring 2025 ‚Ä¢ Regular Season & Playoffs</p>
        <a href="#panel-signup"
          class="inline-block mt-5 px-6 py-3 bg-gradient-to-r from-brand to-brand2 
                  text-white font-semibold rounded-xl shadow-md hover:scale-105 transition">
          Spring Season Entry Form
        </a>
      </div>
    </section>

        <!-- Stats Bar -->
    <section class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
      <!-- Teams -->
      <div class="p-6 rounded-xl bg-white/10 backdrop-blur-lg shadow-md hover:scale-105 transition">
        <h3 class="text-3xl font-extrabold text-white">32</h3>
        <p class="text-gray-300">Teams</p>
      </div>

      <!-- Games -->
      <div class="p-6 rounded-xl bg-white/10 backdrop-blur-lg shadow-md hover:scale-105 transition">
        <h3 class="text-3xl font-extrabold text-white">63</h3>
        <p class="text-gray-300">Games</p>
      </div>

      <!-- Seasons -->
      <div class="p-6 rounded-xl bg-white/10 backdrop-blur-lg shadow-md hover:scale-105 transition">
        <h3 class="text-3xl font-extrabold text-white">100</h3>
        <p class="text-gray-300">Players</p>
      </div>

      <!-- Championship -->
      <div class="p-6 rounded-xl bg-white/10 backdrop-blur-lg shadow-md hover:scale-105 transition">
        <h3 class="text-3xl font-extrabold text-white">1</h3>
        <p class="text-gray-300">Champion Team</p>
      </div>
    </section>

    <main class="tabs" role="main">
      <!-- Tablist -->
      <div class="tablist flex flex-wrap gap-3 bg-white/10 backdrop-blur-md rounded-2xl p-2 shadow-xl"
      role="tablist" aria-label="Tournament sections">

      <!-- Schedule -->
      <button role="tab" id="tab-schedule" aria-selected="true" aria-controls="panel-schedule"
          class="flex items-center gap-2 px-4 py-2 rounded-xl font-semibold
                  bg-gradient-to-r from-brand to-brand2 text-white shadow-md 
                  transform transition hover:scale-105">
      üìÖ Schedule
      </button>

      <!-- Teams -->
      <button role="tab" id="tab-teams" aria-selected="false" aria-controls="panel-teams"
          class="flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-gray-300
                  hover:text-white hover:bg-white/10 transition">
      üèÄ Teams
      </button>

      <!-- FAQ -->
      <button role="tab" id="tab-faq" aria-selected="false" aria-controls="panel-faq"
          class="flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-gray-300
                  hover:text-white hover:bg-white/10 transition">
      ‚ùì FAQ
      </button>

      <!-- Spring Season -->
      <button role="tab" id="tab-springsignup" aria-selected="false" aria-controls="panel-signup"
          class="flex items-center gap-2 px-4 py-2 rounded-xl font-semibold text-gray-300
                  hover:text-white hover:bg-white/10 transition">
      ‚úçÔ∏è Spring Season
      </button>
      </div>

      
      <section id="panel-signup" class="tabpanel" role="tabpanel" aria-labelledby="signupTab" hidden>
        <div class="p-6 bg-white/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-xl">
          <h2 class="text-2xl font-bold mb-4 bg-gradient-to-r from-brand to-brand2 bg-clip-text text-transparent">
            IBA Spring 2026 Sign Up
          </h2>
          <p class="text-gray-300 mb-6">
            Fill out the form below to register your team for the upcoming Spring season.
          </p>
      
          <!-- Embedded Google Form -->
          <iframe 
            src="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform?embedded=true" 
            width="100%" height="900" frameborder="0" marginheight="0" marginwidth="0" 
            class="rounded-xl shadow-lg">
            Loading‚Ä¶
          </iframe>
      
          <!-- Backup Button -->
          <div class="text-center mt-6">
            <a href="https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform" target="_blank" rel="noopener noreferrer"
               class="inline-block px-6 py-3 bg-gradient-to-r from-brand to-brand2 
                      text-white font-semibold rounded-xl shadow-md hover:scale-105 transition">
              Open Form in New Tab
            </a>
          </div>
        </div>
      </section>      

      <section id="panel-schedule" class="tabpanel active" role="tabpanel" aria-labelledby="tab-schedule">
        <button class="add-game-btn" id="addGameBtn">+ Add New Game</button>
        <div class="quick-add-section" style="display: none; margin-bottom: 1rem;">
          <div style="display: flex; gap: 0.5rem; align-items: center;">
            <input type="text" id="quickAddInput" class="input" style="flex: 1;" placeholder="Team1vTeam2,Day,Time,Court,Round,Status (e.g. KOSvBBB,Friday,800pm,Court A,Round of 16,Scheduled)" />
            <button class="admin-submit" id="quickAddBtn" style="padding: 0.55rem 1rem; border-radius: 10px;">Quick Add</button>
          </div>
          <div style="color: var(--muted); font-size: 0.85rem; margin-top: 0.5rem;">
            Format: Team1vTeam2,Day,Time,Court,Round,Status (Time: 800pm, 1000pm, etc.)
          </div>
        </div>
        <div class="controls">
          <input id="search" class="input" type="search" placeholder="Search team..." aria-label="Search schedule" />
          <select id="dayFilter" class="select" aria-label="Filter by day">
            <option value="">All days</option>
          </select>
          <select id="courtFilter" class="select" aria-label="Filter by court">
            <option value="">All courts</option>
          </select>
          <button id="searchBtn" class="admin-submit" style="padding: 0.55rem 1rem; border-radius: 10px;">Search</button>
        </div>
        <div class="table-wrap">
          <table id="scheduleTable" aria-describedby="scheduleCaption">
            <caption id="scheduleCaption" class="sr-only">Tournament game schedule</caption>
            <thead>
              <tr>
                <th scope="col">Day</th>
                <th scope="col">Time</th>
                <th scope="col">Matchup</th>
                <th scope="col">Court</th>
                <th scope="col">Round</th>
                <th scope="col">Status</th>
                <th scope="col" class="admin-mode" style="display: none;">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Friday</td>
                <td>6:00 PM</td>
                <td>Team 1 vs Team 2</td>
                <td>Court A</td>
                <td>Round of 16</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
              <tr>
                <td>Friday</td>
                <td>7:00 PM</td>
                <td>Team 3 vs Team 4</td>
                <td>Court B</td>
                <td>Round of 16</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
              <tr>
                <td>Saturday</td>
                <td>2:00 PM</td>
                <td>Team 5 vs Team 6</td>
                <td>Court A</td>
                <td>Quarterfinal</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="panel-teams" class="tabpanel" role="tabpanel" aria-labelledby="tab-teams">
        <div class="grid" id="teamsGrid">
          <article class="team-card" data-team="mutts">
            <button class="edit-icon-btn" onclick="editTeamIcon('mutts')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üèÄ</div>
            <div>
              <h4>Mutts and Fulls <span class="pill" title="Seed">#1</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="bbb">
            <button class="edit-icon-btn" onclick="editTeamIcon('bbb')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üî•</div>
            <div>
              <h4>BBB <span class="pill" title="Seed">#2</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="rajesh">
            <button class="edit-icon-btn" onclick="editTeamIcon('rajesh')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üõ°Ô∏è</div>
            <div>
              <h4>Rajesh's Last Dance <span class="pill" title="Seed">#3</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="club">
            <button class="edit-icon-btn" onclick="editTeamIcon('club')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">‚ö°</div>
            <div>
              <h4>Club ballers <span class="pill" title="Seed">#4</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="navsandeep">
            <button class="edit-icon-btn" onclick="editTeamIcon('navsandeep')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">‚≠ê</div>
            <div>
              <h4>Nav/Sandeep <span class="pill" title="Seed">#5</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="kos">
            <button class="edit-icon-btn" onclick="editTeamIcon('kos')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üëë</div>
            <div>
              <h4>KOS <span class="pill" title="Seed">#6</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="lemickey">
            <button class="edit-icon-btn" onclick="editTeamIcon('lemickey')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üèÜ</div>
            <div>
              <h4>LeMickey <span class="pill" title="Seed">#7</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="bbs">
            <button class="edit-icon-btn" onclick="editTeamIcon('bbs')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üí™</div>
            <div>
              <h4>BBS <span class="pill" title="Seed">#8</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="gutti">
            <button class="edit-icon-btn" onclick="editTeamIcon('gutti')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üåü</div>
            <div>
              <h4>gutti boys <span class="pill" title="Seed">#9</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="sap">
            <button class="edit-icon-btn" onclick="editTeamIcon('sap')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üèüÔ∏è</div>
            <div>
              <h4>SAP Center <span class="pill" title="Seed">#10</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="are">
            <button class="edit-icon-btn" onclick="editTeamIcon('are')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üöÄ</div>
            <div>
              <h4>ARE 3.0 <span class="pill" title="Seed">#11</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="naujawan">
            <button class="edit-icon-btn" onclick="editTeamIcon('naujawan')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üíé</div>
            <div>
              <h4>Naujawan <span class="pill" title="Seed">#12</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="buckit">
            <button class="edit-icon-btn" onclick="editTeamIcon('buckit')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">ü™£</div>
            <div>
              <h4>Buckit <span class="pill" title="Seed">#13</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="swish">
            <button class="edit-icon-btn" onclick="editTeamIcon('swish')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üå∂Ô∏è</div>
            <div>
              <h4>Swish Kebabs <span class="pill" title="Seed">#14</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="diko">
            <button class="edit-icon-btn" onclick="editTeamIcon('diko')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">üéØ</div>
            <div>
              <h4>Diko & Co. <span class="pill" title="Seed">#15</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="fuse">
            <button class="edit-icon-btn" onclick="editTeamIcon('fuse')">Edit Icon</button>
            <div class="avatar" aria-hidden="true">‚ö°</div>
            <div>
              <h4>Fuse <span class="pill" title="Seed">#16</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
        </div>
      </section>

      <section id="panel-faq" class="tabpanel" role="tabpanel" aria-labelledby="tab-faq">
        <div class="faq">
          <details>
            <summary>How many players are allowed per team?</summary>
            <p>Each team may have up to 4 players on the roster.</p>
          </details>
          <details>
            <summary>Who is eligible to participate?</summary>
            <p>All currently enrolled Purdue University students are eligible to play. Valid student ID may be required.</p>
          </details>
          <details>
            <summary>What is the registration fee?</summary>
            <p>The registration fee is $5 per person, paid at the time of team registration.</p>
          </details>
          <details>
            <summary>How long are games?</summary>
            <p>Each game is 30 minutes in length.</p>
          </details>
          <details>
            <summary>How do I know what jersey colors to wear?</summary>
            <p>Teams listed on the right side of the schedule wear white jerseys, while teams on the left wear black. We will also send reminders before each game.</p>
          </details>
          <details>
            <summary>Will there be referees and scorekeepers?</summary>
            <p>Yes, all games will have referees officiating and a dedicated scorekeeper tracking the game.</p>
          </details>
          <details>
            <summary>Is there a penalty for arriving late?</summary>
            <p>Yes. Teams arriving late will be penalized one point per minute for the opposing team. Please arrive at least 10 minutes before your scheduled game time.</p>
          </details>
          <details>
            <summary>What happens if my team wears incorrect jersey colors?</summary>
            <p>Teams wearing incorrect jersey colors will be assessed a penalty of one free throw per violation for the opposing team.</p>
          </details>
          <details>
            <summary>What if we cannot make it to our scheduled game?</summary>
            <p>If your team cannot attend, you may forfeit the game or contact the opposing team directly to request a reschedule. Please provide as much advance notice as possible.</p>
          </details>
          <details>
            <summary>Where are games played?</summary>
            <p>All games are held at the France A. C√≥rdova Recreational Sports Center. The specific court assignment for each game is listed in the schedule.</p>
          </details>
        </div>
      </section>
    </main>



    <!-- Team Detail Modal -->
    <div id="teamModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTeamName">Team Name</h2>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="stats-grid">
            <div class="stat-box">
              <div class="label">Record</div>
              <div class="value" id="teamRecord">0-0</div>
            </div>
            <div class="stat-box">
              <div class="label">Point Differential</div>
              <div class="value" id="teamDiff">+0</div>
            </div>
            <div class="stat-box">
              <div class="label">Seed</div>
              <div class="value" id="teamSeed">-</div>
            </div>
          </div>

          <h3 class="section-title">Roster</h3>
          <ul class="roster-list" id="rosterList">
            <!-- Roster items populated by JS -->
          </ul>

          <h3 class="section-title">Completed Games</h3>
          <div id="completedGames">
            <!-- Game items populated by JS -->
          </div>

          <h3 class="section-title">Upcoming Games</h3>
          <div id="upcomingGames">
            <!-- Game items populated by JS -->
          </div>
        </div>
      </div>
    </div>

    <footer>
      ¬© <span id="y"></span> IBA ‚Äî Questions? DM us on Instagram <a href="https://www.instagram.com/iba_purdue/" target="_blank" rel="noopener noreferrer" style="color: var(--text); text-decoration: underline;">@iba_purdue</a> or email <a href="mailto:ibapurdue@gmail.com" style="color: var(--text); text-decoration: underline;">ibapurdue@gmail.com</a>
    </footer>

    <!-- Admin button -->
    <button class="admin-btn" id="adminBtn">Admin</button>

    <!-- Admin login modal -->
    <div id="adminModal" class="admin-modal">
      <div class="admin-modal-content">
        <h3>Admin Login</h3>
        <input type="password" id="adminPassword" class="admin-input" placeholder="Enter password" />
        <div class="admin-error" id="adminError">Incorrect password</div>
        <div class="admin-buttons">
          <button class="admin-cancel" id="adminCancel">Cancel</button>
          <button class="admin-submit" id="adminSubmit">Login</button>
        </div>
      </div>
    </div>

    <!-- Edit/Add game modal -->
    <div id="editGameModal" class="edit-game-modal">
      <div class="edit-game-content">
        <h3 id="editGameTitle">Edit Game</h3>
        <form id="gameForm">
          <div class="form-group">
            <label>Day</label>
            <select id="gameDay" required>
              <option value="">Select day...</option>
              <option value="Monday">Monday</option>
              <option value="Tuesday">Tuesday</option>
              <option value="Wednesday">Wednesday</option>
              <option value="Thursday">Thursday</option>
              <option value="Friday">Friday</option>
              <option value="Saturday">Saturday</option>
              <option value="Sunday">Sunday</option>
            </select>
          </div>
          <div class="form-group">
            <label>Time</label>
            <input type="text" id="gameTime" placeholder="e.g. 6:00 PM" required />
          </div>
          <div class="form-group">
            <label>Matchup</label>
            <input type="text" id="gameMatchup" placeholder="e.g. Team A vs Team B" required />
          </div>
          <div class="form-group">
            <label>Court</label>
            <select id="gameCourt" required>
              <option value="">Select court...</option>
              <option value="Black and Gold Court 1">Black and Gold Court 1</option>
              <option value="Black and Gold Court 2">Black and Gold Court 2</option>
              <option value="Black and Gold Court 3">Black and Gold Court 3</option>
              <option value="Black and Gold Court 4">Black and Gold Court 4</option>
              <option value="Black and Gold Court 5">Black and Gold Court 5</option>
              <option value="Black and Gold Court 6">Black and Gold Court 6</option>
              <option value="Upper Court 1">Upper Court 1</option>
              <option value="Upper Court 2">Upper Court 2</option>
              <option value="Upper Court 3">Upper Court 3</option>
            </select>
          </div>
          <div class="form-group">
            <label>Round</label>
            <input type="text" id="gameRound" placeholder="e.g. Round of 16" required />
          </div>
          <div class="form-group">
            <label>Status</label>
            <select id="gameStatus" required>
              <option value="Scheduled">Scheduled</option>
              <option value="In Progress">In Progress</option>
              <option value="Completed">Completed</option>
              <option value="Cancelled">Cancelled</option>
              <option value="TBD">TBD</option>
            </select>
          </div>
          <div class="admin-buttons">
            <button type="button" class="admin-cancel" id="cancelEdit">Cancel</button>
            <button type="submit" class="admin-submit">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Wait for Firebase to be available
    function waitForFirebase(callback) {
      if (window.db && window.firestoreImports) {
        callback();
      } else {
        setTimeout(() => waitForFirebase(callback), 100);
      }
    }

    waitForFirebase(() => {
      const { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot } = window.firestoreImports;
      const db = window.db;

      // Load games from Firestore in real-time
      function loadGames() {
        console.log('üì• Loading games from Firestore...');
        const gamesCollection = collection(db, 'games');
        
        onSnapshot(gamesCollection, (snapshot) => {
          console.log(`üìä Loaded ${snapshot.size} games from database`);
          const tbody = document.querySelector('#scheduleTable tbody');
          tbody.innerHTML = ''; // Clear existing rows
          
          if (snapshot.empty) {
            console.log('‚ÑπÔ∏è No games in database yet');
          }
          
          snapshot.forEach((docSnapshot) => {
            const game = docSnapshot.data();
            const row = tbody.insertRow();
            row.dataset.docId = docSnapshot.id;
            row.innerHTML = `
              <td>${game.day}</td>
              <td>${game.time}</td>
              <td>${game.matchup}</td>
              <td>${game.court}</td>
              <td>${game.round}</td>
              <td><span class="badge">${game.status}</span></td>
              <td>
                <button class="edit-btn" onclick="editGame(this)">Edit</button>
                <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
              </td>
            `;
          });
        }, (error) => {
          console.error('‚ùå Error loading games:', error);
          alert('Error loading games from database: ' + error.message);
        });
      }

      // Start loading games
      loadGames();

      // Teams data
      const teamsData = {
      'mutts': {
        name: 'Mutts and Fulls',
        seed: 1,
        record: { wins: 3, losses: 0 },
        pointDiff: 42,
        roster: [],
        completedGames: [
          { opponent: 'Buckit', result: 'W', score: '21-8', date: 'Sep 22' },
          { opponent: 'Certified Bucket Getters', result: 'W', score: '19-0', date: 'Sep 29' },
          { opponent: 'The Blue Ballers', result: 'W', score: '22-12', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'bbb': {
        name: 'BBB',
        seed: 2,
        record: { wins: 3, losses: 0 },
        pointDiff: 38,
        roster: [],
        completedGames: [
          { opponent: 'ARE 3.0', result: 'W', score: '21-18', date: 'Sep 22' },
          { opponent: 'Lafayette Lakers', result: 'W', score: '21-2', date: 'Oct 1' },
          { opponent: 'Rasthuggers', result: 'W', score: '21-5', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'rajesh': {
        name: "Rajesh's Last Dance",
        seed: 3,
        record: { wins: 3, losses: 0 },
        pointDiff: 27,
        roster: [],
        completedGames: [
          { opponent: 'Buzz Ballers', result: 'W', score: '9-0', date: 'Sep 25' },
          { opponent: 'SAP Center', result: 'W', score: '21-14', date: 'Sep 30' },
          { opponent: 'LeBronda', result: 'W', score: '11-0', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'club': {
        name: 'Club ballers',
        seed: 4,
        record: { wins: 3, losses: 0 },
        pointDiff: 20,
        roster: [],
        completedGames: [
          { opponent: 'Ja Wick', result: 'W', score: '22-11', date: 'Sep 22' },
          { opponent: 'RRN', result: 'W', score: '21-16', date: 'Sep 24' },
          { opponent: 'gutti boys', result: 'W', score: '21-17', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'navsandeep': {
        name: 'Nav/Sandeep',
        seed: 5,
        record: { wins: 3, losses: 0 },
        pointDiff: 18,
        roster: [],
        completedGames: [
          { opponent: 'Diko & Co.', result: 'W', score: '22-18', date: 'Sep 22' },
          { opponent: 'Kareem Puffs', result: 'W', score: '21-14', date: 'Sep 29' },
          { opponent: 'Tech Support', result: 'W', score: '21-14', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'kos': {
        name: 'KOS',
        seed: 6,
        record: { wins: 3, losses: 0 },
        pointDiff: 17,
        roster: [],
        completedGames: [
          { opponent: 'Swish Kebabs', result: 'W', score: '21-18', date: 'Sep 25' },
          { opponent: 'Tandoori Towers', result: 'W', score: '21-11', date: 'Sep 29' },
          { opponent: '67 Elite Freaks', result: 'W', score: '21-17', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'lemickey': {
        name: 'LeMickey',
        seed: 7,
        record: { wins: 3, losses: 0 },
        pointDiff: 13,
        roster: [],
        completedGames: [
          { opponent: 'Squirt Sisters', result: 'W', score: '21-18', date: 'Sep 25' },
          { opponent: 'Fuse', result: 'W', score: '21-13', date: 'Sep 30' },
          { opponent: 'Hoop', result: 'W', score: '21-19', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'bbs': {
        name: 'BBS',
        seed: 8,
        record: { wins: 3, losses: 0 },
        pointDiff: 11,
        roster: [],
        completedGames: [
          { opponent: 'Walmart Oreos', result: 'W', score: '21-15', date: 'Sep 22' },
          { opponent: 'The Baboons', result: 'W', score: '21-19', date: 'Sep 29' },
          { opponent: 'Naujawan', result: 'W', score: '21-18', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'gutti': {
        name: 'gutti boys',
        seed: 9,
        record: { wins: 2, losses: 1 },
        pointDiff: 20,
        roster: [],
        completedGames: [
          { opponent: 'Ja Wick', result: 'W', score: '21-7', date: 'Sep 25' },
          { opponent: 'Club ballers', result: 'L', score: '17-21', date: 'Sep 30' },
          { opponent: 'RRN', result: 'W', score: '21-11', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'sap': {
        name: 'SAP Center',
        seed: 10,
        record: { wins: 2, losses: 1 },
        pointDiff: 15,
        roster: [],
        completedGames: [
          { opponent: 'LeBronda', result: 'W', score: '11-0', date: 'Sep 25' },
          { opponent: "Rajesh's Last Dance", result: 'L', score: '14-21', date: 'Sep 30' },
          { opponent: 'Buzz Ballers', result: 'W', score: '11-0', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'are': {
        name: 'ARE 3.0',
        seed: 11,
        record: { wins: 2, losses: 1 },
        pointDiff: 12,
        roster: [],
        completedGames: [
          { opponent: 'BBB', result: 'L', score: '18-21', date: 'Sep 22' },
          { opponent: 'Lafayette Lakers', result: 'W', score: '21-16', date: 'Sep 29' },
          { opponent: 'Rasthuggers', result: 'W', score: '21-11', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'naujawan': {
        name: 'Naujawan',
        seed: 12,
        record: { wins: 2, losses: 1 },
        pointDiff: 11,
        roster: [],
        completedGames: [
          { opponent: 'The Baboons', result: 'W', score: '21-17', date: 'Sep 22' },
          { opponent: 'Walmart Oreos', result: 'W', score: '22-12', date: 'Sep 29' },
          { opponent: 'BBS', result: 'L', score: '18-21', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'buckit': {
        name: 'Buckit',
        seed: 13,
        record: { wins: 2, losses: 1 },
        pointDiff: 10,
        roster: [],
        completedGames: [
          { opponent: 'Mutts and Fulls', result: 'L', score: '8-21', date: 'Sep 22' },
          { opponent: 'Certified Bucket Getters', result: 'W', score: '22-4', date: 'Sep 25' },
          { opponent: 'The Blue Ballers', result: 'W', score: '21-16', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'swish': {
        name: 'Swish Kebabs',
        seed: 14,
        record: { wins: 1, losses: 2 },
        pointDiff: 18,
        roster: [],
        completedGames: [
          { opponent: 'KOS', result: 'L', score: '18-21', date: 'Sep 25' },
          { opponent: 'Tandoori Towers', result: 'L', score: '17-21', date: 'Sep 30' },
          { opponent: '67 Elite Freaks', result: 'W', score: '21-4', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'diko': {
        name: 'Diko & Co.',
        seed: 15,
        record: { wins: 1, losses: 2 },
        pointDiff: 5,
        roster: [],
        completedGames: [
          { opponent: 'Nav/Sandeep', result: 'L', score: '18-22', date: 'Sep 22' },
          { opponent: 'Tech Support', result: 'L', score: '19-21', date: 'Sep 29' },
          { opponent: 'Kareem Puffs', result: 'W', score: '11-0', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'fuse': {
        name: 'Fuse',
        seed: 16,
        record: { wins: 1, losses: 2 },
        pointDiff: 2,
        roster: [],
        completedGames: [
          { opponent: 'Hoop', result: 'L', score: '15-21', date: 'Sep 25' },
          { opponent: 'LeMickey', result: 'L', score: '13-21', date: 'Sep 30' },
          { opponent: 'Squirt Sisters', result: 'W', score: '22-6', date: 'Oct 2' }
        ],
        upcomingGames: []
      }
    };

    // Tabs functionality
    const tabs = Array.from(document.querySelectorAll('[role="tab"]'));
    const panels = Array.from(document.querySelectorAll('[role="tabpanel"]'));

    function activateTab(tab) {
      tabs.forEach(t => t.setAttribute('aria-selected', String(t === tab)));
      panels.forEach(p => p.classList.toggle('active', p.id === tab.getAttribute('aria-controls')));
      tab.focus();
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => activateTab(tab));
      tab.addEventListener('keydown', (e) => {
        const i = tabs.indexOf(tab);
        if (e.key === 'ArrowRight') {
          e.preventDefault(); activateTab(tabs[(i + 1) % tabs.length]);
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault(); activateTab(tabs[(i - 1 + tabs.length) % tabs.length]);
        }
      });
    });

    // Modal functionality
    const modal = document.getElementById('teamModal');
    const closeBtn = document.getElementById('closeModal');

    function openTeamModal(teamId) {
      const team = teamsData[teamId];
      if (!team) return;

      document.getElementById('modalTeamName').textContent = team.name;
      document.getElementById('teamRecord').textContent = `${team.record.wins}-${team.record.losses}`;
      document.getElementById('teamDiff').textContent = team.pointDiff > 0 ? `+${team.pointDiff}` : team.pointDiff;
      document.getElementById('teamSeed').textContent = `#${team.seed}`;

      // Populate roster
      const rosterList = document.getElementById('rosterList');
      rosterList.innerHTML = team.roster.map(player => 
        `<li><span>${player.name}</span><span class="pill">#${player.number}</span></li>`
      ).join('');

      // Populate completed games
      const completedDiv = document.getElementById('completedGames');
      completedDiv.innerHTML = team.completedGames.length ? team.completedGames.map(game =>
        `<div class="game-item">
          <div class="game-header">
            <span class="matchup">${game.result === 'W' ? '‚úì' : '‚úó'} vs ${game.opponent}</span>
            <span class="badge">${game.score}</span>
          </div>
          <div class="game-info">${game.date}</div>
        </div>`
      ).join('') : '<p style="color: var(--muted);">No completed games yet</p>';

      // Populate upcoming games
      const upcomingDiv = document.getElementById('upcomingGames');
      upcomingDiv.innerHTML = team.upcomingGames.length ? team.upcomingGames.map(game =>
        `<div class="game-item">
          <div class="game-header">
            <span class="matchup">vs ${game.opponent}</span>
            <span class="badge">${game.court}</span>
          </div>
          <div class="game-info">${game.date} at ${game.time}</div>
        </div>`
      ).join('') : '<p style="color: var(--muted);">No upcoming games scheduled</p>';

      modal.classList.add('active');
    }

    closeBtn.addEventListener('click', () => modal.classList.remove('active'));
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('active');
    });

    // Team card click handlers
    document.getElementById('teamsGrid').addEventListener('click', (e) => {
      // Don't open modal if clicking edit icon button
      if (e.target.classList.contains('edit-icon-btn')) {
        return;
      }
      
      const card = e.target.closest('.team-card');
      if (card) {
        const teamId = card.dataset.team;
        openTeamModal(teamId);
      }
    });

    // Copy link
    const chip = document.getElementById('copyLink');
    chip?.addEventListener('click', async () => {
      try { 
        await navigator.clipboard.writeText(location.href); 
        chip.textContent = 'Link copied!'; 
        setTimeout(() => chip.textContent = 'iba.tourney/2025', 1200); 
      } catch {}
    });

    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Admin functionality
    const adminBtn = document.getElementById('adminBtn');
    const adminModal = document.getElementById('adminModal');
    const adminPassword = document.getElementById('adminPassword');
    const adminSubmit = document.getElementById('adminSubmit');
    const adminCancel = document.getElementById('adminCancel');
    const adminError = document.getElementById('adminError');

    const ADMIN_PASSWORD = 'iba2025'; // Change this to your desired password
    let isAdminMode = false;
    let currentEditRow = null;

    adminBtn.addEventListener('click', () => {
      if (isAdminMode) {
        // Logout
        isAdminMode = false;
        document.body.classList.remove('admin-mode');
        adminBtn.textContent = 'Admin';
        adminBtn.style.background = 'var(--brand)';
        document.querySelectorAll('thead th:last-child').forEach(th => th.style.display = 'none');
        quickAddSection.style.display = 'none';
      } else {
        // Show login
        adminModal.classList.add('active');
        adminPassword.value = '';
        adminError.style.display = 'none';
        setTimeout(() => adminPassword.focus(), 100);
      }
    });

    adminCancel.addEventListener('click', () => {
      adminModal.classList.remove('active');
    });

    adminModal.addEventListener('click', (e) => {
      if (e.target === adminModal) {
        adminModal.classList.remove('active');
      }
    });

    adminSubmit.addEventListener('click', () => {
      if (adminPassword.value === ADMIN_PASSWORD) {
        adminModal.classList.remove('active');
        isAdminMode = true;
        document.body.classList.add('admin-mode');
        adminBtn.textContent = 'Logout';
        adminBtn.style.background = 'var(--success)';
        document.querySelectorAll('thead th:last-child').forEach(th => th.style.display = '');
        quickAddSection.style.display = 'block';
      } else {
        adminError.style.display = 'block';
        adminPassword.value = '';
        adminPassword.focus();
      }
    });

    adminPassword.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        adminSubmit.click();
      }
    });

    // Add game functionality
    const addGameBtn = document.getElementById('addGameBtn');
    const editGameModal = document.getElementById('editGameModal');
    const gameForm = document.getElementById('gameForm');
    const cancelEdit = document.getElementById('cancelEdit');
    const editGameTitle = document.getElementById('editGameTitle');
    const quickAddSection = document.querySelector('.quick-add-section');
    const quickAddInput = document.getElementById('quickAddInput');
    const quickAddBtn = document.getElementById('quickAddBtn');

    addGameBtn.addEventListener('click', () => {
      currentEditRow = null;
      editGameTitle.textContent = 'Add New Game';
      gameForm.reset();
      editGameModal.classList.add('active');
    });

    // Quick add functionality
    quickAddBtn.addEventListener('click', () => {
      const input = quickAddInput.value.trim();
      if (!input) {
        alert('Please enter game details');
        return;
      }

      const parts = input.split(',').map(p => p.trim());
      if (parts.length !== 6) {
        alert('Invalid format. Use: Team1vTeam2,Day,Time,Court,Round,Status');
        return;
      }

      const [matchup, day, timeRaw, court, round, status] = parts;
      
      // Convert time format (800pm -> 8:00 PM, 1000pm -> 10:00 PM)
      let time = timeRaw.toLowerCase().replace('pm', ' PM').replace('am', ' AM');
      time = time.replace(/(\d{1,2})(\d{2})\s/, '$1:$2 ');

      const gameData = {
        day,
        time,
        matchup: matchup.replace('v', ' vs '),
        court,
        round,
        status
      };

      const { collection, addDoc } = window.firestoreImports;
      const db = window.db;

      addDoc(collection(db, 'games'), gameData).then(() => {
        quickAddInput.value = '';
        alert('Game added successfully!');
      }).catch(error => {
        console.error('Error adding game:', error);
        alert('Error adding game: ' + error.message);
      });
    });

    // Allow Enter key for quick add
    quickAddInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        quickAddBtn.click();
      }
    });

    // Team icon editing functionality
    const editIconModal = document.getElementById('editIconModal');
    const editIconTeamName = document.getElementById('editIconTeamName');
    const iconPicker = document.getElementById('iconPicker');
    const cancelIconEdit = document.getElementById('cancelIconEdit');
    const saveIconBtn = document.getElementById('saveIcon');
    let currentEditTeam = null;
    let selectedIcon = null;

    const availableIcons = ['üèÄ', 'üî•', '‚ö°', 'üí™', 'üèÜ', 'üëë', '‚≠ê', 'üåü', 'üíé', 'üöÄ', 'üõ°Ô∏è', 'üéØ', 'ü™£', 'üå∂Ô∏è', 'üèüÔ∏è', '‚öΩ', 'üéÆ', 'üé®', 'ü¶Å', 'üêØ', 'ü¶Ö', 'üêâ', 'ü¶à', 'üê∫', 'ü¶ä', 'üêª', 'ü¶Ñ', 'üî±', '‚öîÔ∏è', 'üé™'];

    window.editTeamIcon = function(teamId) {
      if (!isAdminMode) return;
      
      currentEditTeam = teamId;
      const team = teamsData[teamId];
      editIconTeamName.textContent = team.name;
      
      // Get current icon
      const teamCard = document.querySelector(`[data-team="${teamId}"]`);
      const currentIcon = teamCard.querySelector('.avatar').textContent;
      selectedIcon = currentIcon;
      
      // Populate icon picker
      iconPicker.innerHTML = availableIcons.map(icon => 
        `<div class="icon-option ${icon === currentIcon ? 'selected' : ''}" data-icon="${icon}">${icon}</div>`
      ).join('');
      
      // Add click handlers
      iconPicker.querySelectorAll('.icon-option').forEach(option => {
        option.addEventListener('click', () => {
          iconPicker.querySelectorAll('.icon-option').forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');
          selectedIcon = option.dataset.icon;
        });
      });
      
      editIconModal.classList.add('active');
    };

    cancelIconEdit.addEventListener('click', () => {
      editIconModal.classList.remove('active');
    });

    editIconModal.addEventListener('click', (e) => {
      if (e.target === editIconModal) {
        editIconModal.classList.remove('active');
      }
    });

    saveIconBtn.addEventListener('click', () => {
      if (!currentEditTeam || !selectedIcon) return;
      
      // Update the icon in the UI
      const teamCard = document.querySelector(`[data-team="${currentEditTeam}"]`);
      teamCard.querySelector('.avatar').textContent = selectedIcon;
      
      // TODO: Save to Firebase/localStorage if you want persistence
      // For now, it only updates in the current session
      
      editIconModal.classList.remove('active');
    });

    cancelEdit.addEventListener('click', () => {
      editGameModal.classList.remove('active');
    });

    editGameModal.addEventListener('click', (e) => {
      if (e.target === editGameModal) {
        editGameModal.classList.remove('active');
      }
    });

    gameForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const { collection, addDoc, updateDoc, doc } = window.firestoreImports;
      const db = window.db;
      
      const day = document.getElementById('gameDay').value;
      const time = document.getElementById('gameTime').value;
      const matchup = document.getElementById('gameMatchup').value;
      const court = document.getElementById('gameCourt').value;
      const round = document.getElementById('gameRound').value;
      const status = document.getElementById('gameStatus').value;

      const gameData = { day, time, matchup, court, round, status };

      if (currentEditRow) {
        // Update existing game in Firestore
        const docId = currentEditRow.dataset.docId;
        const gameRef = doc(db, 'games', docId);
        updateDoc(gameRef, gameData).then(() => {
          editGameModal.classList.remove('active');
        }).catch(error => {
          console.error('Error updating game:', error);
          alert('Error updating game. Please try again.');
        });
      } else {
        // Add new game to Firestore
        addDoc(collection(db, 'games'), gameData).then(() => {
          editGameModal.classList.remove('active');
        }).catch(error => {
          console.error('Error adding game:', error);
          alert('Error adding game. Please try again.');
        });
      }
    });

    // Edit and delete functions (global scope)
    window.editGame = function(btn) {
      if (!isAdminMode) return;
      currentEditRow = btn.closest('tr');
      const cells = currentEditRow.cells;
      
      editGameTitle.textContent = 'Edit Game';
      document.getElementById('gameDay').value = cells[0].textContent;
      document.getElementById('gameTime').value = cells[1].textContent;
      document.getElementById('gameMatchup').value = cells[2].textContent;
      document.getElementById('gameCourt').value = cells[3].textContent;
      document.getElementById('gameRound').value = cells[4].textContent;
      document.getElementById('gameStatus').value = cells[5].querySelector('.badge').textContent.trim();
      
      editGameModal.classList.add('active');
    };

    window.deleteGame = function(btn) {
      if (!isAdminMode) return;
      if (confirm('Are you sure you want to delete this game?')) {
        console.log('üóëÔ∏è Deleting game...');
        const { deleteDoc, doc } = window.firestoreImports;
        const db = window.db;
        
        const row = btn.closest('tr');
        const docId = row.dataset.docId;
        const matchup = row.cells[2].textContent;
        const day = row.cells[0].textContent;
        
        // Remove from upcoming games before deleting
        const teams = matchup.split(' vs ').map(t => t.trim());
        const team1 = teams[0];
        const team2 = teams[1];
        
        const team1Id = Object.keys(teamsData).find(id => teamsData[id].name === team1);
        const team2Id = Object.keys(teamsData).find(id => teamsData[id].name === team2);
        
        if (team1Id) {
          teamsData[team1Id].upcomingGames = teamsData[team1Id].upcomingGames.filter(
            g => g.opponent !== team2 || g.date !== day
          );
        }
        if (team2Id) {
          teamsData[team2Id].upcomingGames = teamsData[team2Id].upcomingGames.filter(
            g => g.opponent !== team1 || g.date !== day
          );
        }
        
        console.log('Deleting document ID:', docId);
        const gameRef = doc(db, 'games', docId);
        deleteDoc(gameRef).then(() => {
          console.log('‚úÖ Game deleted successfully');
        }).catch(error => {
          console.error('‚ùå Error deleting game:', error);
          alert('Error deleting game: ' + error.message);
        });
      }
    };

    // Schedule filters
    const search = document.getElementById('search');
    const dayFilter = document.getElementById('dayFilter');
    const courtFilter = document.getElementById('courtFilter');
    const searchBtn = document.getElementById('searchBtn');
    const rows = document.querySelectorAll('#scheduleTable tbody tr');

    function applyFilters() {
      const q = (search.value || '').toLowerCase();
      const day = dayFilter.value;
      const court = courtFilter.value;
      const allRows = Array.from(document.querySelectorAll('#scheduleTable tbody tr'));
      allRows.forEach(tr => {
        const cells = tr.children;
        const matchesQuery = !q || tr.textContent.toLowerCase().includes(q);
        const matchesDay = !day || cells[0].textContent === day;
        const matchesCourt = !court || cells[3].textContent === court;
        tr.style.display = (matchesQuery && matchesDay && matchesCourt) ? '' : 'none';
      });
    }
    
    searchBtn.addEventListener('click', applyFilters);
    search.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        applyFilters();
      }
    });
    [dayFilter, courtFilter].forEach(el => el.addEventListener('change', applyFilters));
    
    }); // End of waitForFirebase
  </script>
  <script>
    document.querySelectorAll('a[href="#panel-signup"]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        // Activate tab
        document.getElementById('tab-springsignup').click();
        // Smooth scroll
        document.getElementById('panel-signup').scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>    
</body>
</html>
