<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>IBA Basketball Tournament</title>
  
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const firebaseConfig = {
      apiKey: "AIzaSyBN0rfpzjredziJbPny-YfEgq4uE2l1hzE",
      authDomain: "iba-website-63cb3.firebaseapp.com",
      projectId: "iba-website-63cb3",
      storageBucket: "iba-website-63cb3.firebasestorage.app",
      messagingSenderId: "267064036667",
      appId: "1:267064036667:web:4f9d28aac0d5ae4ca97b1e",
      measurementId: "G-GGH99DCY07"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    
    // Make Firebase available globally
    window.db = db;
    window.firestoreImports = { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot };
  </script>
  
  <style>
    :root {
      --bg: #0b0f1a;
      --panel: #111827;
      --muted: #a3adc2;
      --text: #e7ecf6;
      --brand: #ff9d00;
      --brand-2: #4f46e5;
      --ring: rgba(255,157,0,0.35);
      --border: #1f2937;
      --card: #0f1524;
      --success: #22c55e;
      --warning: #f59e0b;
      --danger: #ef4444;
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 10% 0%, #0d1324, #090d18 60%), var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
    }

    .wrap {
      max-width: 1100px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    header.site {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.25rem;
      background: linear-gradient(180deg, #0f162a 0%, #0b1020 100%);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: sticky; top: 12px; z-index: 50;
    }
    .logo {
      width: 52px; height: 52px; border-radius: 12px; display: grid; place-items: center;
      background:
        radial-gradient(70% 90% at 60% 20%, rgba(255,255,255,0.08), transparent 60%),
        linear-gradient(135deg, #111b35, #0a0f20);
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    .logo:before {
      content: ""; position: absolute; inset: -20% -40% auto auto; rotate: 35deg;
      width: 120%; height: 70%;
      background: linear-gradient(90deg, rgba(255,255,255,.06), transparent);
    }
    .logo svg { width: 30px; height: 30px; }

    .title h1 { margin: 0; font-size: clamp(1.15rem, 1rem + 1vw, 1.6rem); letter-spacing: .3px; }
    .title p { margin: .1rem 0 0; color: var(--muted); font-size: .9rem; }

    .meta {
      display: flex; gap: .5rem; align-items: center; flex-wrap: wrap;
    }
    .chip { font-size: .8rem; color: #0b0f1a; background: var(--brand); padding: .3rem .6rem; border-radius: 999px; font-weight: 700; }
    .chip.alt { background: #222b44; color: var(--text); border: 1px solid var(--border); }

    .tabs {
      margin-top: 1rem;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .tablist {
      display: flex;
      gap: .25rem; flex-wrap: wrap;
      padding: .5rem; background: #0d1426; border-bottom: 1px solid var(--border);
    }
    .tablist button {
      appearance: none; border: 1px solid var(--border); background: #0f172a; color: var(--text);
      padding: .6rem .9rem; border-radius: 12px; font-weight: 600; letter-spacing: .2px; cursor: pointer;
      transition: transform .06s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .tablist button[aria-selected="true"], .tablist button:focus-visible {
      outline: none; border-color: var(--brand);
      box-shadow: 0 0 0 4px var(--ring);
    }
    .tablist button[aria-selected="true"] { background: linear-gradient(180deg, #0f1732, #0a1024); }

    .tabpanel { display: none; padding: 1.25rem; }
    .tabpanel.active { display: block; }

    .controls { display: flex; flex-wrap: wrap; gap: .75rem; margin-bottom: 1rem; }
    .input, .select {
      background: #0a1122; color: var(--text); border: 1px solid var(--border);
      padding: .55rem .7rem; border-radius: 10px; min-width: 200px;
    }
    .table-wrap { overflow: auto; border: 1px solid var(--border); border-radius: 12px; }
    table { width: 100%; border-collapse: collapse; min-width: 640px; }
    thead th {
      position: sticky; top: 0; z-index: 1; background: #0d1426;
      text-align: left; font-size: .9rem; color: var(--muted);
      border-bottom: 1px solid var(--border); padding: .75rem .9rem;
    }
    tbody td { padding: .85rem .9rem; border-bottom: 1px solid var(--border); }
    tbody tr:hover { background: rgba(255,255,255,.03); }
    .badge { font-size: .75rem; padding: .25rem .5rem; border-radius: 999px; border: 1px solid var(--border); background: #0b1224; }

    .grid { display: grid; gap: 1rem; grid-template-columns: repeat(12, 1fr); }
    .team-card {
      grid-column: span 12;
      background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: .9rem; 
      display: flex; gap: .9rem; align-items: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .team-card:hover {
      background: #111a2e;
      border-color: var(--brand);
      transform: translateY(-2px);
    }
    @media (min-width: 600px) { .team-card { grid-column: span 6; } }
    @media (min-width: 900px) { .team-card { grid-column: span 4; } }
    .avatar { width: 46px; height: 46px; border-radius: 12px; background: #0e1833; display: grid; place-items: center; border: 1px solid var(--border); }
    .team-card h4 { margin: 0; font-size: 1rem; }
    .team-card p { margin: .25rem 0 0; color: var(--muted); font-size: .9rem; }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 100;
      padding: 2rem;
      overflow-y: auto;
    }
    .modal.active { display: flex; align-items: center; justify-content: center; }
    .modal-content {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow);
    }
    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal-header h2 { margin: 0; font-size: 1.5rem; }
    .close-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0;
      width: 32px;
      height: 32px;
      border-radius: 8px;
      transition: all 0.2s;
    }
    .close-btn:hover {
      background: var(--border);
      color: var(--text);
    }
    .modal-body {
      padding: 1.5rem;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .stat-box {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
    }
    .stat-box .label {
      color: var(--muted);
      font-size: 0.85rem;
      margin-bottom: 0.25rem;
    }
    .stat-box .value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--text);
    }
    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin: 1.5rem 0 1rem;
      color: var(--text);
      border-bottom: 1px solid var(--border);
      padding-bottom: 0.5rem;
    }
    .roster-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .roster-list li {
      padding: 0.75rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin-bottom: 0.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .game-item {
      padding: 1rem;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin-bottom: 0.75rem;
    }
    .game-item .game-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }
    .game-item .matchup {
      font-weight: 600;
    }
    .game-item .game-info {
      color: var(--muted);
      font-size: 0.9rem;
    }

    .faq { max-width: 900px; margin-inline: auto; }
    details {
      border: 1px solid var(--border); border-radius: 12px; background: #0c1226; padding: .9rem 1rem; margin: .6rem 0; transition: background .2s ease;
    }
    details[open] { background: #0e1733; }
    summary { cursor: pointer; font-weight: 700; list-style: none; }
    summary::-webkit-details-marker { display: none; }
    details p { margin: .6rem 0 0; color: var(--muted); }

    footer { text-align: center; color: var(--muted); font-size: .85rem; margin: 1.25rem 0 3rem; }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
    .pill { display: inline-flex; align-items: center; gap: .4rem; padding: .35rem .55rem; background: #0b1224; border: 1px solid var(--border); border-radius: 999px; font-size: .8rem; color: var(--muted); }
    
    /* Admin button */
    .admin-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 0.75rem 1.25rem;
      background: var(--brand);
      color: #0b0f1a;
      border: none;
      border-radius: 999px;
      font-weight: 700;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(255, 157, 0, 0.3);
      transition: all 0.2s ease;
      z-index: 60;
    }
    .admin-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(255, 157, 0, 0.4);
    }
    
    /* Admin login modal */
    .admin-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 100;
      padding: 2rem;
      align-items: center;
      justify-content: center;
    }
    .admin-modal.active { display: flex; }
    .admin-modal-content {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      max-width: 400px;
      width: 100%;
      padding: 2rem;
      box-shadow: var(--shadow);
    }
    .admin-modal h3 {
      margin: 0 0 1.5rem 0;
      color: var(--text);
      font-size: 1.5rem;
    }
    .admin-input {
      width: 100%;
      background: #0a1122;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 0.75rem;
      border-radius: 10px;
      font-size: 1rem;
      margin-bottom: 1rem;
    }
    .admin-input:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 3px var(--ring);
    }
    .admin-buttons {
      display: flex;
      gap: 0.75rem;
    }
    .admin-submit, .admin-cancel {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .admin-submit {
      background: var(--brand);
      color: #0b0f1a;
    }
    .admin-submit:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(255, 157, 0, 0.3);
    }
    .admin-cancel {
      background: var(--border);
      color: var(--text);
    }
    .admin-cancel:hover {
      background: #2a3441;
    }
    .admin-error {
      color: var(--danger);
      font-size: 0.9rem;
      margin-top: 0.5rem;
      display: none;
    }
    
    /* Admin mode styles */
    .admin-mode .admin-btn {
      background: var(--success);
    }
    .edit-btn {
      display: none;
      padding: 0.4rem 0.8rem;
      background: var(--brand);
      color: #0b0f1a;
      border: none;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      margin-left: 0.5rem;
    }
    .admin-mode .edit-btn {
      display: inline-block;
    }
    .edit-btn:hover {
      opacity: 0.9;
    }
    .delete-btn {
      display: none;
      padding: 0.4rem 0.8rem;
      background: var(--danger);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      margin-left: 0.5rem;
    }
    .admin-mode .delete-btn {
      display: inline-block !important;
    }
    .delete-btn:hover {
      opacity: 0.9;
    }
    .add-game-btn {
      display: none;
      padding: 0.75rem 1.5rem;
      background: var(--success);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 1rem;
    }
    .admin-mode .add-game-btn {
      display: inline-block;
    }
    .add-game-btn:hover {
      opacity: 0.9;
    }
    
    /* Edit game modal */
    .edit-game-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 110;
      padding: 2rem;
      align-items: center;
      justify-content: center;
      overflow-y: auto;
    }
    .edit-game-modal.active { display: flex; }
    .edit-game-content {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      max-width: 500px;
      width: 100%;
      padding: 2rem;
      box-shadow: var(--shadow);
    }
    .edit-game-content h3 {
      margin: 0 0 1.5rem 0;
      color: var(--text);
    }
    .form-group {
      margin-bottom: 1rem;
    }
    .form-group label {
      display: block;
      color: var(--muted);
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .form-group input, .form-group select {
      width: 100%;
      background: #0a1122;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 0.75rem;
      border-radius: 10px;
      font-size: 1rem;
    }
    .form-group input:focus, .form-group select:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 3px var(--ring);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="site" role="banner">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="url(#g)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#ffb347" />
              <stop offset="1" stop-color="#ff9d00" />
            </linearGradient>
          </defs>
          <circle cx="12" cy="12" r="9" />
          <path d="M3 12h18M12 3c2.5 2.6 3.7 5.7 3.7 9S14.5 18.4 12 21M12 3c-2.5 2.6-3.7 5.7-3.7 9s1.2 6.4 3.7 9" />
        </svg>
      </div>
      <div class="title">
        <h1>IBA Tournament</h1>
        <p>Indian Basketball Association ‚Ä¢ Season 2025</p>
      </div>
      <div class="meta">
        <a href="https://www.instagram.com/iba_purdue/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
          <span class="chip" title="Follow us on Instagram">INSTAGRAM</span>
        </a>
        <span class="chip alt pill" title="Tap to copy" id="copyLink">iba.tourney/2025</span>
      </div>
    </header>

    <main class="tabs" role="main">
      <div class="tablist" role="tablist" aria-label="Tournament sections">
        <button role="tab" id="tab-schedule" aria-selected="true" aria-controls="panel-schedule">Schedule</button>
        <button role="tab" id="tab-teams" aria-selected="false" aria-controls="panel-teams">Teams</button>
        <button role="tab" id="tab-faq" aria-selected="false" aria-controls="panel-faq">FAQ</button>
      </div>

      <section id="panel-schedule" class="tabpanel active" role="tabpanel" aria-labelledby="tab-schedule">
        <button class="add-game-btn" id="addGameBtn">+ Add New Game</button>
        <div class="controls">
          <input id="search" class="input" type="search" placeholder="Search team or court‚Ä¶" aria-label="Search schedule" />
          <select id="dayFilter" class="select" aria-label="Filter by day">
            <option value="">All days</option>
            <option>Friday</option>
            <option>Saturday</option>
            <option>Sunday</option>
          </select>
          <select id="courtFilter" class="select" aria-label="Filter by court">
            <option value="">All courts</option>
            <option>Court A</option>
            <option>Court B</option>
          </select>
        </div>
        <div class="table-wrap">
          <table id="scheduleTable" aria-describedby="scheduleCaption">
            <caption id="scheduleCaption" class="sr-only">Tournament game schedule</caption>
            <thead>
              <tr>
                <th scope="col">Day</th>
                <th scope="col">Time</th>
                <th scope="col">Matchup</th>
                <th scope="col">Court</th>
                <th scope="col">Round</th>
                <th scope="col">Status</th>
                <th scope="col" class="admin-mode" style="display: none;">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Friday</td>
                <td>6:00 PM</td>
                <td>Team 1 vs Team 2</td>
                <td>Court A</td>
                <td>Round of 16</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
              <tr>
                <td>Friday</td>
                <td>7:00 PM</td>
                <td>Team 3 vs Team 4</td>
                <td>Court B</td>
                <td>Round of 16</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
              <tr>
                <td>Saturday</td>
                <td>2:00 PM</td>
                <td>Team 5 vs Team 6</td>
                <td>Court A</td>
                <td>Quarterfinal</td>
                <td><span class="badge">Scheduled</span></td>
                <td>
                  <button class="edit-btn" onclick="editGame(this)">Edit</button>
                  <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="panel-teams" class="tabpanel" role="tabpanel" aria-labelledby="tab-teams">
        <div class="grid" id="teamsGrid">
          <article class="team-card" data-team="mutts">
            <div class="avatar" aria-hidden="true">üèÄ</div>
            <div>
              <h4>Mutts and Fulls <span class="pill" title="Seed">#1</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="bbb">
            <div class="avatar" aria-hidden="true">üî•</div>
            <div>
              <h4>BBB <span class="pill" title="Seed">#2</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="rajesh">
            <div class="avatar" aria-hidden="true">üõ°Ô∏è</div>
            <div>
              <h4>Rajesh's Last Dance <span class="pill" title="Seed">#3</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="club">
            <div class="avatar" aria-hidden="true">‚ö°</div>
            <div>
              <h4>Club ballers <span class="pill" title="Seed">#4</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="navsandeep">
            <div class="avatar" aria-hidden="true">‚≠ê</div>
            <div>
              <h4>Nav/Sandeep <span class="pill" title="Seed">#5</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="kos">
            <div class="avatar" aria-hidden="true">üëë</div>
            <div>
              <h4>KOS <span class="pill" title="Seed">#6</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="lemickey">
            <div class="avatar" aria-hidden="true">üèÜ</div>
            <div>
              <h4>LeMickey <span class="pill" title="Seed">#7</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="bbs">
            <div class="avatar" aria-hidden="true">üí™</div>
            <div>
              <h4>BBS <span class="pill" title="Seed">#8</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="gutti">
            <div class="avatar" aria-hidden="true">üåü</div>
            <div>
              <h4>gutti boys <span class="pill" title="Seed">#9</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="sap">
            <div class="avatar" aria-hidden="true">üèüÔ∏è</div>
            <div>
              <h4>SAP Center <span class="pill" title="Seed">#10</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="are">
            <div class="avatar" aria-hidden="true">üöÄ</div>
            <div>
              <h4>ARE 3.0 <span class="pill" title="Seed">#11</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="naujawan">
            <div class="avatar" aria-hidden="true">üíé</div>
            <div>
              <h4>Naujawan <span class="pill" title="Seed">#12</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="buckit">
            <div class="avatar" aria-hidden="true">ü™£</div>
            <div>
              <h4>Buckit <span class="pill" title="Seed">#13</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="swish">
            <div class="avatar" aria-hidden="true">üå∂Ô∏è</div>
            <div>
              <h4>Swish Kebabs <span class="pill" title="Seed">#14</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="diko">
            <div class="avatar" aria-hidden="true">üéØ</div>
            <div>
              <h4>Diko & Co. <span class="pill" title="Seed">#15</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
          <article class="team-card" data-team="fuse">
            <div class="avatar" aria-hidden="true">‚ö°</div>
            <div>
              <h4>Fuse <span class="pill" title="Seed">#16</span></h4>
              <p>Click to view roster and stats</p>
            </div>
          </article>
        </div>
      </section>

      <section id="panel-faq" class="tabpanel" role="tabpanel" aria-labelledby="tab-faq">
        <div class="faq">
          <details>
            <summary>Where is the tournament hosted?</summary>
            <p>All games are at the designated venue. Check-in is required 15 minutes before your scheduled game time.</p>
          </details>
          <details>
            <summary>How do seeding and tiebreakers work?</summary>
            <p>Seeding is based on pool play record, then head-to-head, then point differential, then coin toss.</p>
          </details>
          <details>
            <summary>What are roster and eligibility rules?</summary>
            <p>Maximum 8 players per roster. All players must be registered prior to first game. No mid-bracket additions.</p>
          </details>
          <details>
            <summary>What if we need to forfeit?</summary>
            <p>Please notify organizers at least 2 hours in advance. No refunds after bracket release.</p>
          </details>
        </div>
      </section>
    </main>

    <!-- Team Detail Modal -->
    <div id="teamModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTeamName">Team Name</h2>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="stats-grid">
            <div class="stat-box">
              <div class="label">Record</div>
              <div class="value" id="teamRecord">0-0</div>
            </div>
            <div class="stat-box">
              <div class="label">Point Differential</div>
              <div class="value" id="teamDiff">+0</div>
            </div>
            <div class="stat-box">
              <div class="label">Seed</div>
              <div class="value" id="teamSeed">-</div>
            </div>
          </div>

          <h3 class="section-title">Roster</h3>
          <ul class="roster-list" id="rosterList">
            <!-- Roster items populated by JS -->
          </ul>

          <h3 class="section-title">Completed Games</h3>
          <div id="completedGames">
            <!-- Game items populated by JS -->
          </div>

          <h3 class="section-title">Upcoming Games</h3>
          <div id="upcomingGames">
            <!-- Game items populated by JS -->
          </div>
        </div>
      </div>
    </div>

    <footer>
      ¬© <span id="y"></span> IBA ‚Äî Questions? DM us on Instagram <a href="https://www.instagram.com/iba_purdue/" target="_blank" rel="noopener noreferrer" style="color: var(--text); text-decoration: underline;">@iba_purdue</a> or email <a href="mailto:ibapurdue@gmail.com" style="color: var(--text); text-decoration: underline;">ibapurdue@gmail.com</a>
    </footer>

    <!-- Admin button -->
    <button class="admin-btn" id="adminBtn">Admin</button>

    <!-- Admin login modal -->
    <div id="adminModal" class="admin-modal">
      <div class="admin-modal-content">
        <h3>Admin Login</h3>
        <input type="password" id="adminPassword" class="admin-input" placeholder="Enter password" />
        <div class="admin-error" id="adminError">Incorrect password</div>
        <div class="admin-buttons">
          <button class="admin-cancel" id="adminCancel">Cancel</button>
          <button class="admin-submit" id="adminSubmit">Login</button>
        </div>
      </div>
    </div>

    <!-- Edit/Add game modal -->
    <div id="editGameModal" class="edit-game-modal">
      <div class="edit-game-content">
        <h3 id="editGameTitle">Edit Game</h3>
        <form id="gameForm">
          <div class="form-group">
            <label>Day</label>
            <input type="text" id="gameDay" placeholder="e.g. Friday, Saturday" required />
          </div>
          <div class="form-group">
            <label>Time</label>
            <input type="text" id="gameTime" placeholder="e.g. 6:00 PM" required />
          </div>
          <div class="form-group">
            <label>Matchup</label>
            <input type="text" id="gameMatchup" placeholder="e.g. Team A vs Team B" required />
          </div>
          <div class="form-group">
            <label>Court</label>
            <input type="text" id="gameCourt" placeholder="e.g. Court A" required />
          </div>
          <div class="form-group">
            <label>Round</label>
            <input type="text" id="gameRound" placeholder="e.g. Round of 16" required />
          </div>
          <div class="form-group">
            <label>Status</label>
            <select id="gameStatus" required>
              <option value="Scheduled">Scheduled</option>
              <option value="In Progress">In Progress</option>
              <option value="Completed">Completed</option>
              <option value="TBD">TBD</option>
            </select>
          </div>
          <div class="admin-buttons">
            <button type="button" class="admin-cancel" id="cancelEdit">Cancel</button>
            <button type="submit" class="admin-submit">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Wait for Firebase to be available
    function waitForFirebase(callback) {
      if (window.db && window.firestoreImports) {
        callback();
      } else {
        setTimeout(() => waitForFirebase(callback), 100);
      }
    }

    waitForFirebase(() => {
      const { collection, getDocs, addDoc, updateDoc, deleteDoc, doc, onSnapshot } = window.firestoreImports;
      const db = window.db;

      // Load games from Firestore in real-time
      function loadGames() {
        const gamesCollection = collection(db, 'games');
        
        onSnapshot(gamesCollection, (snapshot) => {
          const tbody = document.querySelector('#scheduleTable tbody');
          tbody.innerHTML = ''; // Clear existing rows
          
          snapshot.forEach((docSnapshot) => {
            const game = docSnapshot.data();
            const row = tbody.insertRow();
            row.dataset.docId = docSnapshot.id;
            row.innerHTML = `
              <td>${game.day}</td>
              <td>${game.time}</td>
              <td>${game.matchup}</td>
              <td>${game.court}</td>
              <td>${game.round}</td>
              <td><span class="badge">${game.status}</span></td>
              <td>
                <button class="edit-btn" onclick="editGame(this)">Edit</button>
                <button class="delete-btn" onclick="deleteGame(this)">Delete</button>
              </td>
            `;
          });
        });
      }

      // Start loading games
      loadGames();

      // Teams data
      const teamsData = {
      'mutts': {
        name: 'Mutts and Fulls',
        seed: 1,
        record: { wins: 3, losses: 0 },
        pointDiff: 42,
        roster: [],
        completedGames: [
          { opponent: 'Buckit', result: 'W', score: '21-8', date: 'Sep 22' },
          { opponent: 'Certified Bucket Getters', result: 'W', score: '19-0', date: 'Sep 29' },
          { opponent: 'The Blue Ballers', result: 'W', score: '22-12', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'bbb': {
        name: 'BBB',
        seed: 2,
        record: { wins: 3, losses: 0 },
        pointDiff: 38,
        roster: [],
        completedGames: [
          { opponent: 'ARE 3.0', result: 'W', score: '21-18', date: 'Sep 22' },
          { opponent: 'Lafayette Lakers', result: 'W', score: '21-2', date: 'Oct 1' },
          { opponent: 'Rasthuggers', result: 'W', score: '21-5', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'rajesh': {
        name: "Rajesh's Last Dance",
        seed: 3,
        record: { wins: 3, losses: 0 },
        pointDiff: 27,
        roster: [],
        completedGames: [
          { opponent: 'Buzz Ballers', result: 'W', score: '9-0', date: 'Sep 25' },
          { opponent: 'SAP Center', result: 'W', score: '21-14', date: 'Sep 30' },
          { opponent: 'LeBronda', result: 'W', score: '11-0', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'club': {
        name: 'Club ballers',
        seed: 4,
        record: { wins: 3, losses: 0 },
        pointDiff: 20,
        roster: [],
        completedGames: [
          { opponent: 'Ja Wick', result: 'W', score: '22-11', date: 'Sep 22' },
          { opponent: 'RRN', result: 'W', score: '21-16', date: 'Sep 24' },
          { opponent: 'gutti boys', result: 'W', score: '21-17', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'navsandeep': {
        name: 'Nav/Sandeep',
        seed: 5,
        record: { wins: 3, losses: 0 },
        pointDiff: 18,
        roster: [],
        completedGames: [
          { opponent: 'Diko & Co.', result: 'W', score: '22-18', date: 'Sep 22' },
          { opponent: 'Kareem Puffs', result: 'W', score: '21-14', date: 'Sep 29' },
          { opponent: 'Tech Support', result: 'W', score: '21-14', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'kos': {
        name: 'KOS',
        seed: 6,
        record: { wins: 3, losses: 0 },
        pointDiff: 17,
        roster: [],
        completedGames: [
          { opponent: 'Swish Kebabs', result: 'W', score: '21-18', date: 'Sep 25' },
          { opponent: 'Tandoori Towers', result: 'W', score: '21-11', date: 'Sep 29' },
          { opponent: '67 Elite Freaks', result: 'W', score: '21-17', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'lemickey': {
        name: 'LeMickey',
        seed: 7,
        record: { wins: 3, losses: 0 },
        pointDiff: 13,
        roster: [],
        completedGames: [
          { opponent: 'Squirt Sisters', result: 'W', score: '21-18', date: 'Sep 25' },
          { opponent: 'Fuse', result: 'W', score: '21-13', date: 'Sep 30' },
          { opponent: 'Hoop', result: 'W', score: '21-19', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'bbs': {
        name: 'BBS',
        seed: 8,
        record: { wins: 3, losses: 0 },
        pointDiff: 11,
        roster: [],
        completedGames: [
          { opponent: 'Walmart Oreos', result: 'W', score: '21-15', date: 'Sep 22' },
          { opponent: 'The Baboons', result: 'W', score: '21-19', date: 'Sep 29' },
          { opponent: 'Naujawan', result: 'W', score: '21-18', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'gutti': {
        name: 'gutti boys',
        seed: 9,
        record: { wins: 2, losses: 1 },
        pointDiff: 20,
        roster: [],
        completedGames: [
          { opponent: 'Ja Wick', result: 'W', score: '21-7', date: 'Sep 25' },
          { opponent: 'Club ballers', result: 'L', score: '17-21', date: 'Sep 30' },
          { opponent: 'RRN', result: 'W', score: '21-11', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'sap': {
        name: 'SAP Center',
        seed: 10,
        record: { wins: 2, losses: 1 },
        pointDiff: 15,
        roster: [],
        completedGames: [
          { opponent: 'LeBronda', result: 'W', score: '11-0', date: 'Sep 25' },
          { opponent: "Rajesh's Last Dance", result: 'L', score: '14-21', date: 'Sep 30' },
          { opponent: 'Buzz Ballers', result: 'W', score: '11-0', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'are': {
        name: 'ARE 3.0',
        seed: 11,
        record: { wins: 2, losses: 1 },
        pointDiff: 12,
        roster: [],
        completedGames: [
          { opponent: 'BBB', result: 'L', score: '18-21', date: 'Sep 22' },
          { opponent: 'Lafayette Lakers', result: 'W', score: '21-16', date: 'Sep 29' },
          { opponent: 'Rasthuggers', result: 'W', score: '21-11', date: 'Sep 30' }
        ],
        upcomingGames: []
      },
      'naujawan': {
        name: 'Naujawan',
        seed: 12,
        record: { wins: 2, losses: 1 },
        pointDiff: 11,
        roster: [],
        completedGames: [
          { opponent: 'The Baboons', result: 'W', score: '21-17', date: 'Sep 22' },
          { opponent: 'Walmart Oreos', result: 'W', score: '22-12', date: 'Sep 29' },
          { opponent: 'BBS', result: 'L', score: '18-21', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'buckit': {
        name: 'Buckit',
        seed: 13,
        record: { wins: 2, losses: 1 },
        pointDiff: 10,
        roster: [],
        completedGames: [
          { opponent: 'Mutts and Fulls', result: 'L', score: '8-21', date: 'Sep 22' },
          { opponent: 'Certified Bucket Getters', result: 'W', score: '22-4', date: 'Sep 25' },
          { opponent: 'The Blue Ballers', result: 'W', score: '21-16', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'swish': {
        name: 'Swish Kebabs',
        seed: 14,
        record: { wins: 1, losses: 2 },
        pointDiff: 18,
        roster: [],
        completedGames: [
          { opponent: 'KOS', result: 'L', score: '18-21', date: 'Sep 25' },
          { opponent: 'Tandoori Towers', result: 'L', score: '17-21', date: 'Sep 30' },
          { opponent: '67 Elite Freaks', result: 'W', score: '21-4', date: 'Oct 1' }
        ],
        upcomingGames: []
      },
      'diko': {
        name: 'Diko & Co.',
        seed: 15,
        record: { wins: 1, losses: 2 },
        pointDiff: 5,
        roster: [],
        completedGames: [
          { opponent: 'Nav/Sandeep', result: 'L', score: '18-22', date: 'Sep 22' },
          { opponent: 'Tech Support', result: 'L', score: '19-21', date: 'Sep 29' },
          { opponent: 'Kareem Puffs', result: 'W', score: '11-0', date: 'Oct 2' }
        ],
        upcomingGames: []
      },
      'fuse': {
        name: 'Fuse',
        seed: 16,
        record: { wins: 1, losses: 2 },
        pointDiff: 2,
        roster: [],
        completedGames: [
          { opponent: 'Hoop', result: 'L', score: '15-21', date: 'Sep 25' },
          { opponent: 'LeMickey', result: 'L', score: '13-21', date: 'Sep 30' },
          { opponent: 'Squirt Sisters', result: 'W', score: '22-6', date: 'Oct 2' }
        ],
        upcomingGames: []
      }
    };

    // Tabs functionality
    const tabs = Array.from(document.querySelectorAll('[role="tab"]'));
    const panels = Array.from(document.querySelectorAll('[role="tabpanel"]'));

    function activateTab(tab) {
      tabs.forEach(t => t.setAttribute('aria-selected', String(t === tab)));
      panels.forEach(p => p.classList.toggle('active', p.id === tab.getAttribute('aria-controls')));
      tab.focus();
    }

    tabs.forEach(tab => {
      tab.addEventListener('click', () => activateTab(tab));
      tab.addEventListener('keydown', (e) => {
        const i = tabs.indexOf(tab);
        if (e.key === 'ArrowRight') {
          e.preventDefault(); activateTab(tabs[(i + 1) % tabs.length]);
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault(); activateTab(tabs[(i - 1 + tabs.length) % tabs.length]);
        }
      });
    });

    // Modal functionality
    const modal = document.getElementById('teamModal');
    const closeBtn = document.getElementById('closeModal');

    function openTeamModal(teamId) {
      const team = teamsData[teamId];
      if (!team) return;

      document.getElementById('modalTeamName').textContent = team.name;
      document.getElementById('teamRecord').textContent = `${team.record.wins}-${team.record.losses}`;
      document.getElementById('teamDiff').textContent = team.pointDiff > 0 ? `+${team.pointDiff}` : team.pointDiff;
      document.getElementById('teamSeed').textContent = `#${team.seed}`;

      // Populate roster
      const rosterList = document.getElementById('rosterList');
      rosterList.innerHTML = team.roster.map(player => 
        `<li><span>${player.name}</span><span class="pill">#${player.number}</span></li>`
      ).join('');

      // Populate completed games
      const completedDiv = document.getElementById('completedGames');
      completedDiv.innerHTML = team.completedGames.length ? team.completedGames.map(game =>
        `<div class="game-item">
          <div class="game-header">
            <span class="matchup">${game.result === 'W' ? '‚úì' : '‚úó'} vs ${game.opponent}</span>
            <span class="badge">${game.score}</span>
          </div>
          <div class="game-info">${game.date}</div>
        </div>`
      ).join('') : '<p style="color: var(--muted);">No completed games yet</p>';

      // Populate upcoming games
      const upcomingDiv = document.getElementById('upcomingGames');
      upcomingDiv.innerHTML = team.upcomingGames.length ? team.upcomingGames.map(game =>
        `<div class="game-item">
          <div class="game-header">
            <span class="matchup">vs ${game.opponent}</span>
            <span class="badge">${game.court}</span>
          </div>
          <div class="game-info">${game.date} at ${game.time}</div>
        </div>`
      ).join('') : '<p style="color: var(--muted);">No upcoming games scheduled</p>';

      modal.classList.add('active');
    }

    closeBtn.addEventListener('click', () => modal.classList.remove('active'));
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('active');
    });

    // Team card click handlers
    document.getElementById('teamsGrid').addEventListener('click', (e) => {
      const card = e.target.closest('.team-card');
      if (card) {
        const teamId = card.dataset.team;
        openTeamModal(teamId);
      }
    });

    // Copy link
    const chip = document.getElementById('copyLink');
    chip?.addEventListener('click', async () => {
      try { 
        await navigator.clipboard.writeText(location.href); 
        chip.textContent = 'Link copied!'; 
        setTimeout(() => chip.textContent = 'iba.tourney/2025', 1200); 
      } catch {}
    });

    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Admin functionality
    const adminBtn = document.getElementById('adminBtn');
    const adminModal = document.getElementById('adminModal');
    const adminPassword = document.getElementById('adminPassword');
    const adminSubmit = document.getElementById('adminSubmit');
    const adminCancel = document.getElementById('adminCancel');
    const adminError = document.getElementById('adminError');

    const ADMIN_PASSWORD = 'iba2025'; // Change this to your desired password
    let isAdminMode = false;
    let currentEditRow = null;

    adminBtn.addEventListener('click', () => {
      if (isAdminMode) {
        // Logout
        isAdminMode = false;
        document.body.classList.remove('admin-mode');
        adminBtn.textContent = 'Admin';
        adminBtn.style.background = 'var(--brand)';
        document.querySelectorAll('thead th:last-child').forEach(th => th.style.display = 'none');
      } else {
        // Show login
        adminModal.classList.add('active');
        adminPassword.value = '';
        adminError.style.display = 'none';
        setTimeout(() => adminPassword.focus(), 100);
      }
    });

    adminCancel.addEventListener('click', () => {
      adminModal.classList.remove('active');
    });

    adminModal.addEventListener('click', (e) => {
      if (e.target === adminModal) {
        adminModal.classList.remove('active');
      }
    });

    adminSubmit.addEventListener('click', () => {
      if (adminPassword.value === ADMIN_PASSWORD) {
        adminModal.classList.remove('active');
        isAdminMode = true;
        document.body.classList.add('admin-mode');
        adminBtn.textContent = 'Logout';
        adminBtn.style.background = 'var(--success)';
        document.querySelectorAll('thead th:last-child').forEach(th => th.style.display = '');
      } else {
        adminError.style.display = 'block';
        adminPassword.value = '';
        adminPassword.focus();
      }
    });

    adminPassword.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        adminSubmit.click();
      }
    });

    // Add game functionality
    const addGameBtn = document.getElementById('addGameBtn');
    const editGameModal = document.getElementById('editGameModal');
    const gameForm = document.getElementById('gameForm');
    const cancelEdit = document.getElementById('cancelEdit');
    const editGameTitle = document.getElementById('editGameTitle');

    addGameBtn.addEventListener('click', () => {
      currentEditRow = null;
      editGameTitle.textContent = 'Add New Game';
      gameForm.reset();
      editGameModal.classList.add('active');
    });

    cancelEdit.addEventListener('click', () => {
      editGameModal.classList.remove('active');
    });

    editGameModal.addEventListener('click', (e) => {
      if (e.target === editGameModal) {
        editGameModal.classList.remove('active');
      }
    });

    gameForm.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const { collection, addDoc, updateDoc, doc } = window.firestoreImports;
      const db = window.db;
      
      const day = document.getElementById('gameDay').value;
      const time = document.getElementById('gameTime').value;
      const matchup = document.getElementById('gameMatchup').value;
      const court = document.getElementById('gameCourt').value;
      const round = document.getElementById('gameRound').value;
      const status = document.getElementById('gameStatus').value;

      const gameData = { day, time, matchup, court, round, status };

      if (currentEditRow) {
        // Update existing game in Firestore
        const docId = currentEditRow.dataset.docId;
        const gameRef = doc(db, 'games', docId);
        updateDoc(gameRef, gameData).then(() => {
          editGameModal.classList.remove('active');
        }).catch(error => {
          console.error('Error updating game:', error);
          alert('Error updating game. Please try again.');
        });
      } else {
        // Add new game to Firestore
        addDoc(collection(db, 'games'), gameData).then(() => {
          editGameModal.classList.remove('active');
        }).catch(error => {
          console.error('Error adding game:', error);
          alert('Error adding game. Please try again.');
        });
      }
    });

    // Edit and delete functions (global scope)
    window.editGame = function(btn) {
      if (!isAdminMode) return;
      currentEditRow = btn.closest('tr');
      const cells = currentEditRow.cells;
      
      editGameTitle.textContent = 'Edit Game';
      document.getElementById('gameDay').value = cells[0].textContent;
      document.getElementById('gameTime').value = cells[1].textContent;
      document.getElementById('gameMatchup').value = cells[2].textContent;
      document.getElementById('gameCourt').value = cells[3].textContent;
      document.getElementById('gameRound').value = cells[4].textContent;
      document.getElementById('gameStatus').value = cells[5].querySelector('.badge').textContent.trim();
      
      editGameModal.classList.add('active');
    };

    window.deleteGame = function(btn) {
      if (!isAdminMode) return;
      if (confirm('Are you sure you want to delete this game?')) {
        const { deleteDoc, doc } = window.firestoreImports;
        const db = window.db;
        
        const row = btn.closest('tr');
        const docId = row.dataset.docId;
        
        const gameRef = doc(db, 'games', docId);
        deleteDoc(gameRef).catch(error => {
          console.error('Error deleting game:', error);
          alert('Error deleting game. Please try again.');
        });
      }
    };

    // Schedule filters
    const search = document.getElementById('search');
    const dayFilter = document.getElementById('dayFilter');
    const courtFilter = document.getElementById('courtFilter');
    const rows = Array.from(document.querySelectorAll('#scheduleTable tbody tr'));

    function applyFilters() {
      const q = (search.value || '').toLowerCase();
      const day = dayFilter.value;
      const court = courtFilter.value;
      rows.forEach(tr => {
        const cells = tr.children;
        const matchesQuery = !q || tr.textContent.toLowerCase().includes(q);
        const matchesDay = !day || cells[0].textContent === day;
        const matchesCourt = !court || cells[3].textContent === court;
        tr.style.display = (matchesQuery && matchesDay && matchesCourt) ? '' : 'none';
      });
    }
    [search, dayFilter, courtFilter].forEach(el => el.addEventListener('input', applyFilters));
    
    }); // End of waitForFirebase
  </script>
</body>
</html>
